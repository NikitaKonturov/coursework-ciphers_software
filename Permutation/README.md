# README.md

## Описание проекта Permutation

Этот проект реализует класс `Permutation` на языке C++, представляющий собой класс для работы с перестановками. Класс включает конструкторы, деструктор и методы для создания и проверки перестановок, их применения к строкам, а также выполнения композиции.

### 1) Что реализовано

Класс `Permutation` включает следующие основные возможности:

- **Конструкторы**: Предусмотрено несколько вариантов инициализации перестановки:
  - **Конструктор по умолчанию**: Инициализирует пустую перестановку.
  - **Конструктор с указанием размера**: Создает перестановку заданного размера, при этом каждому индексу соответствует он сам.
  - **Конструктор копирования**: Создает копию существующей перестановки.
  - **Конструктор на основе вектора**: Инициализирует перестановку на основе вектора целых чисел, представляющих новое расположение элементов.
  - **Конструктор на основе строки**: Инициализирует перестановку на основе строки целых чисел, разделённых пробелами, например, `"1 2 3 4 5"`.

- **Деструктор**.

- **Основные методы**:
  - **`checkPermutation()`**: Проверяет корректность перестановки (т.е. отсутствие повторяющихся или пропущенных элементов).
  - **`apply(std::string& str)`**: Применяет перестановку к строке, состоящей из символов, **без пробелов**.
  - **`inverse()`**: Строит обратную перестановку, инвертируя текущую.
  - **`operator*`**: Перегрузка оператора умножения для композиции двух перестановок.
  - **`compose(const Permutation& rhs)`**: Выполняет композицию перестановок, сначала применяя правую, затем левую.
  - **Операторы ввода/вывода (`<<` и `>>`)**: Позволяют выводить и вводить перестановку через стандартные потоки.
  - **Оператор ()**: выполняет функцию применения подстановки к числу(находит число, в которое пререходит передаваемое число)

### 2) Как это работает

- **Создание перестановки**: Можно создать перестановку с указанием размера, копируя другую перестановку или с помощью вектора/строки, где каждое число задает новую позицию для соответствующего элемента.

- **Применение перестановки к строке**: Метод `apply` разбивает строку на блоки, кратные размеру перестановки, и затем меняет порядок символов в каждом блоке в соответствии с текущей перестановкой. Если длина строки не кратна размеру перестановки, метод вызывает исключение.

- **Композиция перестановок**: Композиция выполняется с помощью `compose` или перегруженного оператора `*`, применяя элементы второй перестановки к первой.

- **Проверка корректности**: Метод `checkPermutation` проверяет, что все элементы перестановки уникальны и представлены один раз.

### 3) Что нужно доработать

1. **Обработка исключений**: Добавить более информативные сообщения об ошибках при некорректных данных или попытках некорректных операций.

### 4) Условия работы функций

- **Конструкторы**:
  - Конструктор с вектором ожидает уникальные целые числа от 1 до `n`, где `n` — размер вектора.

- **`apply()`**:
  - Строка, к которой применяется перестановка, должна быть без пробелов и её длина должна делиться на размер перестановки.

- **`checkPermutation()`**:
  - Все элементы перестановки должны быть уникальными и присутствовать ровно один раз.

- **`compose()`** и **`operator*`**:
  - Перестановки должны быть одинакового размера для корректной композиции.

### 5) Где выбрасываются ошибки

1. **`checkPermutation()`**:
   - Если какой-либо элемент отсутствует или повторяется, выбрасывается `std::invalid_argument` с сообщением:
     ```cpp
     throw std::invalid_argument("Row elements are different!!!");
     ```
   - Исключение также выбрасывается, если элементы не уникальны.

2. **`apply(std::string& str)`**:
   - Если длина строки не делится на размер перестановки, выбрасывается `std::invalid_argument` с сообщением:
     ```cpp
     throw std::invalid_argument("The length of the string must be a multiple of the size of the permutation!");
     ```

3. **`operator*`**:
   - Если индекс правой перестановки не найден в левой, используется метод `map.at(up)`, который вызывает `std::out_of_range`, если ключ отсутствует.

4. **`operator>>`**:
   - После ввода перестановки метод `checkPermutation()` проверяет корректность. Если перестановка некорректна, выбрасывается исключение, как описано в пункте 1.

5. **В конструкторах при некорректной подстановке**:
   - В случае неправильного формата или значений элементов в строке или векторе выбрасывается `std::invalid_argument`.
